<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Krotov · QuantumControl.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://juliaquantumcontrol.github.io/QuantumControl.jl/api/krotov/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><script src="../../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">QuantumControl.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../glossary/">Glossary</a></li><li><a class="tocitem" href="../../manual/">User Manual</a></li><li><a class="tocitem" href="../../howto/">Howto</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../quantum_control/">QuantumControl</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox" checked/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Subpackages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../quantum_propagators/">QuantumPropagators</a></li><li><a class="tocitem" href="../quantum_control_base/">QuantumControlBase</a></li><li class="is-active"><a class="tocitem" href>Krotov</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Krotov"><span>Krotov</span></a></li></ul></li><li><a class="tocitem" href="../grape/">GRAPE</a></li></ul></li></ul></li><li><a class="tocitem" href="../../history/">History</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li><a class="is-disabled">Subpackages</a></li><li class="is-active"><a href>Krotov</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Krotov</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaQuantumControl/QuantumControl.jl/blob/master/docs/generate_api.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Krotov-Package"><a class="docs-heading-anchor" href="#Krotov-Package">Krotov Package</a><a id="Krotov-Package-1"></a><a class="docs-heading-anchor-permalink" href="#Krotov-Package" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Krotov.KrotovResult"><code>Krotov.KrotovResult</code></a></li><li><a href="#Krotov.PulseParametrization"><code>Krotov.PulseParametrization</code></a></li><li><a href="#Krotov.LogisticParametrization"><code>Krotov.LogisticParametrization</code></a></li><li><a href="#Krotov.LogisticSqParametrization"><code>Krotov.LogisticSqParametrization</code></a></li><li><a href="#Krotov.NoParametrization"><code>Krotov.NoParametrization</code></a></li><li><a href="#Krotov.SquareParametrization"><code>Krotov.SquareParametrization</code></a></li><li><a href="#Krotov.TanhParametrization"><code>Krotov.TanhParametrization</code></a></li><li><a href="#Krotov.TanhSqParametrization"><code>Krotov.TanhSqParametrization</code></a></li><li><a href="#Krotov.optimize_krotov"><code>Krotov.optimize_krotov</code></a></li><li><a href="#Krotov.print_table"><code>Krotov.print_table</code></a></li></ul><h2 id="Krotov"><a class="docs-heading-anchor" href="#Krotov">Krotov</a><a id="Krotov-1"></a><a class="docs-heading-anchor-permalink" href="#Krotov" title="Permalink"></a></h2><h3 id="Public"><a class="docs-heading-anchor" href="#Public">Public</a><a id="Public-1"></a><a class="docs-heading-anchor-permalink" href="#Public" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Krotov.LogisticParametrization" href="#Krotov.LogisticParametrization"><code>Krotov.LogisticParametrization</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Parametrization with a Logistic function that enforces ϵ<em>min &lt; ϵ(t) &lt; ϵ</em>max.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/parametrization.jl#L83-L85">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.LogisticSqParametrization" href="#Krotov.LogisticSqParametrization"><code>Krotov.LogisticSqParametrization</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Parametrization with a Logistic-Square function that enforces 0 ≤ ϵ(t) &lt; ϵ_max.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/parametrization.jl#L109-L111">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.SquareParametrization" href="#Krotov.SquareParametrization"><code>Krotov.SquareParametrization</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Parametrization ϵ(t) = u²(t), enforcing pulse values ≥ 0.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/parametrization.jl#L20">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.TanhParametrization" href="#Krotov.TanhParametrization"><code>Krotov.TanhParametrization</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Parametrization with a tanh function that enforces ϵ<em>min &lt; ϵ(t) &lt; ϵ</em>max.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/parametrization.jl#L35-L37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.TanhSqParametrization" href="#Krotov.TanhSqParametrization"><code>Krotov.TanhSqParametrization</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Parametrization with a tanh² function that enforces <span>$0 ≤ ϵ(t) &lt; ϵ_max$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/parametrization.jl#L60-L62">source</a></section></article><h3 id="Private"><a class="docs-heading-anchor" href="#Private">Private</a><a id="Private-1"></a><a class="docs-heading-anchor-permalink" href="#Private" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Krotov.PulseParametrization" href="#Krotov.PulseParametrization"><code>Krotov.PulseParametrization</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Specification for a &quot;time-local&quot; pulse parametrization.</p><p>The parametrization is given as a collection of three functions:</p><ul><li><span>$ϵ(u(t))$</span></li><li><span>$u(ϵ(t))$</span></li><li><span>$∂ϵ/∂u$</span> as a function of <span>$u(t)$</span>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/parametrization.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.optimize_krotov" href="#Krotov.optimize_krotov"><code>Krotov.optimize_krotov</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Optimize a control problem using Krotov&#39;s method.</p><pre><code class="language-julia hljs">result = optimize_krotov(problem)</code></pre><p>optimizes the given control <a href="../quantum_control_base/#QuantumControlBase.ControlProblem"><code>problem</code></a>, returning a <a href="#Krotov.KrotovResult"><code>KrotovResult</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>It is recommended to call <a href="../quantum_control_base/#QuantumControlBase.optimize"><code>optimize</code></a> with <code>method=:krotov</code> instead of calling <code>optimize_krotov</code> directly.</p></div></div><p>Keyword arguments that control the optimization are taken from the keyword arguments used in the instantiation of <code>problem</code>.</p><p><strong>Required problem keyword arguments</strong></p><ul><li><code>J_T</code>: A function <code>J_T(ϕ, objectives)</code> that evaluates the final time functional from a list <code>ϕ</code> of forward-propagated states and <code>problem.objectives</code>.</li><li><code>chi</code>: A function <code>chi!(χ, ϕ, objectives)</code> what receives a list <code>ϕ</code> of the forward propagates state and must set <span>$χₖ=∂J_T/∂⟨ϕₖ|$</span>.</li></ul><p><strong>Optional problem keyword arguments</strong></p><p>The following keyword arguments are supported (with default values):</p><ul><li><code>sigma=nothing</code>: Function that calculate the second-order contribution. If not given, the first-order Krotov method is used.</li><li><code>iter_start=0</code>: the initial iteration number</li><li><code>iter_stop=5000</code>: the maximum iteration number</li><li><code>prop_method</code>/<code>fw_prop_method</code>/<code>bw_prop_method</code>: The propagation method to use for each objective, see below.</li><li><code>update_hook</code>: A function that receives the Krotov workspace, the iteration number, the list of updated pulses and the list of guess pulses as positional arguments. The function may mutate any of its arguments. This may be used e.g. to apply a spectral filter to the updated pulses, or to update propagation workspaces inside the Krotov workspace.</li><li><code>info_hook</code>: A function that receives the same argumens as <code>update_hook</code>, in order to write information about the current iteration to the screen or to a file. The default <code>info_hook</code> prints a table with convergence information to the screen. Runs after <code>update_hook</code>. The <code>info_hook</code> function may return a tuple, which is stored in the list of <code>records</code> inside the <a href="#Krotov.KrotovResult"><code>KrotovResult</code></a> object.</li><li><code>check_convergence</code>: a function to check whether convergence has been reached. Receives a <a href="#Krotov.KrotovResult"><code>KrotovResult</code></a> object <code>result</code>, and should set <code>result.converged</code> to <code>true</code> and <code>result.message</code> to an appropriate string in case of convergence. Multiple convergence checks can be performed by chaining functions with <code>∘</code>. The convergence check is performed after any calls to <code>update_hook</code> and <code>info_hook</code>.</li></ul><p>The propagation method for the forward propagation of each objective is determined by the first available item of the following:</p><ul><li>a <code>fw_prop_method</code> keyword argument</li><li>a <code>prop_method</code> keyword argument</li><li>a property <code>fw_prop_method</code> of the objective</li><li>a property <code>prop_method</code> of the objective</li><li>the value <code>:auto</code></li></ul><p>The propagation method for the backword propagation is determined similarly, but with <code>bw_prop_method</code> instead of <code>fw_prop_method</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/optimize.jl#L8-L74">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.NoParametrization" href="#Krotov.NoParametrization"><code>Krotov.NoParametrization</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Parametrization where <span>$ϵ(t) ≡ u(t)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/parametrization.jl#L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.KrotovResult" href="#Krotov.KrotovResult"><code>Krotov.KrotovResult</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Result object returned by <a href="#Krotov.optimize_krotov"><code>optimize_krotov</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/result.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Krotov.print_table" href="#Krotov.print_table"><code>Krotov.print_table</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Print optimization progress as a table.</p><p>This functions serves as the default <code>info_hook</code> for an optimization with Krotov&#39;s method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/262df9f62f51395282abac859484d94179ba5789/src/optimize.jl#L276-L281">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quantum_control_base/">« QuantumControlBase</a><a class="docs-footer-nextpage" href="../grape/">GRAPE »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/JuliaQuantumControl/QuantumControl.jl">QuantumControl.jl</a> v0.0.3+dev docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Monday 31 January 2022 07:03">Monday 31 January 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
