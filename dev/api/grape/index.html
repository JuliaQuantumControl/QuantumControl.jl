<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>GRAPE · QuantumControl.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://juliaquantumcontrol.github.io/QuantumControl.jl/api/grape/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">QuantumControl.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../glossary/">Glossary</a></li><li><a class="tocitem" href="../../manual/">User Manual</a></li><li><a class="tocitem" href="../../howto/">Howto</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/">List of Examples</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../quantum_control/">QuantumControl</a></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox" checked/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Subpackages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../quantum_propagators/">QuantumPropagators</a></li><li><a class="tocitem" href="../quantum_control_base/">QuantumControlBase</a></li><li><a class="tocitem" href="../krotov/">Krotov</a></li><li class="is-active"><a class="tocitem" href>GRAPE</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#GRAPEAPI"><span>GRAPE</span></a></li></ul></li></ul></li></ul></li><li><a class="tocitem" href="../../history/">History</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li><a class="is-disabled">Subpackages</a></li><li class="is-active"><a href>GRAPE</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>GRAPE</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaQuantumControl/QuantumControl.jl/blob/master/docs/generate_api.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="GRAPEPackage"><a class="docs-heading-anchor" href="#GRAPEPackage">GRAPE Package</a><a id="GRAPEPackage-1"></a><a class="docs-heading-anchor-permalink" href="#GRAPEPackage" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><p><span>$\gdef\tgt{\text{tgt}}$</span> <span>$\gdef\tr{\operatorname{tr}}$</span> <span>$\gdef\Re{\operatorname{Re}}$</span> <span>$\gdef\Im{\operatorname{Im}}$</span></p><ul><li><a href="#GRAPE.GrapeResult"><code>GRAPE.GrapeResult</code></a></li><li><a href="#GRAPE.optimize_grape"><code>GRAPE.optimize_grape</code></a></li><li><a href="#GRAPE.print_table"><code>GRAPE.print_table</code></a></li></ul><h2 id="GRAPEAPI"><a class="docs-heading-anchor" href="#GRAPEAPI">GRAPE</a><a id="GRAPEAPI-1"></a><a class="docs-heading-anchor-permalink" href="#GRAPEAPI" title="Permalink"></a></h2><h3 id="Private"><a class="docs-heading-anchor" href="#Private">Private</a><a id="Private-1"></a><a class="docs-heading-anchor-permalink" href="#Private" title="Permalink"></a></h3><ul><li><a href="#GRAPE.GrapeResult"><code>GrapeResult</code></a></li><li><a href="#GRAPE.print_table"><code>print_table</code></a></li><li><a href="#GRAPE.optimize_grape"><code>optimize_grape</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="GRAPE.GrapeResult" href="#GRAPE.GrapeResult"><code>GRAPE.GrapeResult</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Result object returned by <a href="#GRAPE.optimize_grape"><code>optimize_grape</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="GRAPE.print_table" href="#GRAPE.print_table"><code>GRAPE.print_table</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Print optimization progress as a table.</p><p>This functions serves as the default <code>info_hook</code> for an optimization with GRAPE.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="GRAPE.optimize_grape" href="#GRAPE.optimize_grape"><code>GRAPE.optimize_grape</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Optimize a control problem using GRAPE.</p><pre><code class="language-julia hljs">result = optimize_grape(problem)</code></pre><p>optimizes the given control <a href="../quantum_control_base/#QuantumControlBase.ControlProblem"><code>problem</code></a>, returning a <a href="#GRAPE.GrapeResult"><code>GrapeResult</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>It is recommended to call <a href="../quantum_control_base/#QuantumControlBase.optimize"><code>optimize</code></a> with <code>method=:GRAPE</code> instead of calling <code>optimize_grape</code> directly.</p></div></div><p>Keyword arguments that control the optimization are taken from the keyword arguments used in the instantiation of <code>problem</code>.</p><p><strong>Required problem keyword arguments</strong></p><ul><li><code>J_T</code>: A function <code>J_T(ϕ, objectives; τ=τ)</code> that evaluates the final time functional from a vector <code>ϕ</code> of forward-propagated states and <code>problem.objectives</code>. For all <code>objectives</code> that define a <code>target_state</code>, the element <code>τₖ</code> of the vector <code>τ</code> will contain the overlap of the state <code>ϕₖ</code> with the <code>target_state</code> of the <code>k</code>&#39;th objective, or <code>NaN</code> otherwise.</li></ul><p><strong>Optional problem keyword arguments</strong></p><ul><li><code>gradient_via</code>: A flag indicating how the gradient of <code>J_T</code> should be  calculated. One of <code>:tau</code>, <code>:chi</code>. If all objectives in <code>problem</code> define a  <code>target_function</code>, the default is <code>gradient_via=:tau</code>. This understands the  functional <code>J_T</code> as a function of the complex overlaps between the  propagated states and the target states, and evaluates the gradient via the  chain rule. For functionals that cannot be expressed in terms of the overlap  of propagated and target states, and/or if not all objectives define a  target state, <code>gradient_via=:chi</code> because the default. In this case, the  functional <code>J_T</code> is understood as a function of the forward-propagated  states directly, and the full gradient is again calculated by the chain  rule. See <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_gradient"><code>make_gradient</code></a> for details.</li><li><code>gradient</code>:  A function to evaluate the gradient of <code>J_T</code>. By default, it is constructed via <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_gradient"><code>make_gradient</code></a>. If given manually, it must meet the interface described by <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_gradient"><code>make_gradient</code></a>. Most importantly, it must be consistent with the chosen <code>gradient_via</code>.</li><li><code>chi</code>: If <code>gradient_via=:chi</code>, a function that constructs the χ-states for  the backward propagation, see <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_gradient"><code>make_gradient</code></a> for details. By  default, it is constructed via <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_chi"><code>make_chi</code></a>. If given manually, it  must meet the same interface described in <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_chi"><code>make_chi</code></a>.</li><li><code>force_zygote=false</code>: Whether to force the use of automatic differentiation in <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_gradient"><code>make_gradient</code></a> and <a href="../quantum_control_base/#QuantumControlBase.Functionals.make_chi"><code>make_chi</code></a>. This disables analytic gradients. The only reason to do this is for testing/benchmarking analytic vs automatic gradients.</li><li><code>update_hook</code>: Not implemented</li><li><code>info_hook</code>: A function that receives the same arguments as <code>update_hook</code>, in order to write information about the current iteration to the screen or to a file. The default <code>info_hook</code> prints a table with convergence information to the screen. Runs after <code>update_hook</code>. The <code>info_hook</code> function may return a tuple, which is stored in the list of <code>records</code> inside the <a href="#GRAPE.GrapeResult"><code>GrapeResult</code></a> object.</li><li><code>check_convergence</code>: A function to check whether convergence has been reached. Receives a <a href="#GRAPE.GrapeResult"><code>GrapeResult</code></a> object <code>result</code>, and should set <code>result.converged</code> to <code>true</code> and <code>result.message</code> to an appropriate string in case of convergence. Multiple convergence checks can be performed by chaining functions with <code>∘</code>. The convergence check is performed after any calls to <code>update_hook</code> and <code>info_hook</code>.</li><li><code>x_tol</code>: Parameter for Optim.jl</li><li><code>f_tol</code>: Parameter for Optim.jl</li><li><code>g_tol</code>: Parameter for Optim.jl</li><li><code>show_trace</code>: Parameter for Optim.jl</li><li><code>extended_trace</code>:  Parameter for Optim.jl</li><li><code>show_every</code>: Parameter for Optim.jl</li><li><code>allow_f_increases</code>: Parameter for Optim.jl</li><li><code>optimizer</code>: An optional Optim.jl optimizer (<code>Optim.AbstractOptimizer</code> instance). If not given, an <a href="https://github.com/Gnimuc/LBFGSB.jl">L-BFGS-B</a> optimizer will be used.</li><li><code>prop_method</code>/<code>fw_prop_method</code>/<code>bw_prop_method</code>: The propagation method to use for each objective, see below.</li><li><code>prop_method</code>/<code>fw_prop_method</code>/<code>grad_prop_method</code>: The propagation method to use for the extended gradient vector for each objective, see below.</li><li><code>verbose=false</code>: If <code>true</code>, print information during initialization</li></ul><p>The propagation method for the forward propagation of each objective is determined by the first available item of the following:</p><ul><li>a <code>fw_prop_method</code> keyword argument</li><li>a <code>prop_method</code> keyword argument</li><li>a property <code>fw_prop_method</code> of the objective</li><li>a property <code>prop_method</code> of the objective</li><li>the value <code>:auto</code></li></ul><p>The propagation method for the backward propagation is determined similarly, but with <code>bw_prop_method</code> instead of <code>fw_prop_method</code>. The propagation method for the forward propagation of the extended gradient vector for each objective is determined from <code>grad_prop_method</code>, <code>fw_prop_method</code>, <code>prop_method</code> in order of precedence.</p></div></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../krotov/">« Krotov</a><a class="docs-footer-nextpage" href="../../history/">History »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/JuliaQuantumControl/QuantumControl.jl">QuantumControl.jl</a> v0.2.0+dev docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 7 September 2022 22:22">Wednesday 7 September 2022</span>. Using Julia version 1.8.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
