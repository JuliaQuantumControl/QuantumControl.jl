<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>User Manual · QuantumControl.jl</title><meta name="title" content="User Manual · QuantumControl.jl"/><meta property="og:title" content="User Manual · QuantumControl.jl"/><meta property="twitter:title" content="User Manual · QuantumControl.jl"/><meta name="description" content="Documentation for QuantumControl.jl."/><meta property="og:description" content="Documentation for QuantumControl.jl."/><meta property="twitter:description" content="Documentation for QuantumControl.jl."/><meta property="og:url" content="https://juliaquantumcontrol.github.io/QuantumControl.jl/manual/"/><meta property="twitter:url" content="https://juliaquantumcontrol.github.io/QuantumControl.jl/manual/"/><link rel="canonical" href="https://juliaquantumcontrol.github.io/QuantumControl.jl/manual/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/><link href="../assets/citations.css" rel="stylesheet" type="text/css"/><link href="https://juliaquantumcontrol.github.io/QuantumControl.jl/dev/assets/topbar/topbar.css" rel="stylesheet" type="text/css"/><script src="https://juliaquantumcontrol.github.io/QuantumControl.jl/dev/assets/topbar/topbar.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">QuantumControl.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../glossary/">Glossary</a></li><li class="is-active"><a class="tocitem" href>User Manual</a><ul class="internal"><li><a class="tocitem" href="#Setting-up-control-problems"><span>Setting up control problems</span></a></li><li><a class="tocitem" href="#Controls-and-control-parameters"><span>Controls and control parameters</span></a></li><li><a class="tocitem" href="#Time-propagation"><span>Time propagation</span></a></li><li><a class="tocitem" href="#Optimization"><span>Optimization</span></a></li></ul></li><li><a class="tocitem" href="../methods/">Control Methods</a></li><li><a class="tocitem" href="../howto/">Howto</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../api/quantum_control/">QuantumControl</a></li><li><a class="tocitem" href="../api/quantum_control_reference/">Local Submodules</a></li><li><input class="collapse-toggle" id="menuitem-7-3" type="checkbox"/><label class="tocitem" for="menuitem-7-3"><span class="docs-label">Subpackages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../api/quantum_propagators/">QuantumPropagators</a></li><li><a class="tocitem" href="../api/quantum_control_base/">QuantumControlBase</a></li></ul></li><li><a class="tocitem" href="../api_externals/">Externals</a></li><li><a class="tocitem" href="../api/quantum_control_index/">Index</a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>User Manual</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>User Manual</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaQuantumControl/QuantumControl.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaQuantumControl/QuantumControl.jl/blob/master/docs/src/manual.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="User-Manual"><a class="docs-heading-anchor" href="#User-Manual">User Manual</a><a id="User-Manual-1"></a><a class="docs-heading-anchor-permalink" href="#User-Manual" title="Permalink"></a></h1><p>The User Manual describes the API of the <code>QuantumControl</code> package by outlining the general procedure for defining and solving quantum control problems. See the <a href="../#API">API</a> for a detailed reference.</p><h2 id="Setting-up-control-problems"><a class="docs-heading-anchor" href="#Setting-up-control-problems">Setting up control problems</a><a id="Setting-up-control-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-control-problems" title="Permalink"></a></h2><p>Quantum control problems are described by instantiating <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a>. Remember that a quantum control problem aims to find control parameters in the dynamical generators (<a href="../api/quantum_propagators/#QuantumPropagators.Generators.hamiltonian">Hamiltonians</a>, <a href="../api/quantum_propagators/#QuantumPropagators.Generators.liouvillian">Liouvillians</a>) of a quantum system to steer the dynamics of the system in some desired way. The dynamics of system are probed by one or more quantum states, each with its particular dynamical generator, which we encode as a <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> object.</p><p>To determine how well the system dynamics meet the desired behavior, a <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> can have additional properties that are taken into account in the optimization functional. Most commonly, this is represented by a <code>target_state</code> property of the <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectory</code></a>. The objective is fulfilled when the control parameters are chosen such that the initial state of each <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> evolves into the target state, on the time grid given as <code>tlist</code> in the <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a>.</p><p>A control problem with a single such trajectory already encodes the common state-to-state problem, e.g., to initialize a system into an entangled state, or to control a chemical reaction. However, there are many control problems that require <em>simultaneously</em> solving more than one trajectory. For example, finding the control parameters that implement a two-qubit quantum gate <span>$Ô$</span> on a quantum computer naturally translates to four simultaneous trajectories, one for each two-qubit basis state: <span>$|00⟩ → Ô |00⟩$</span>, <span>$|01⟩ → Ô |01⟩$</span>, <span>$|10⟩ → Ô |10⟩$</span>, <span>$|00⟩ → Ô |11⟩$</span>. By virtue of the linearity of Hilbert space, finding a simultaneous solution to these four trajectories means the <em>any</em> state <span>$|Ψ⟩$</span> will then evolve as <span>$|Ψ⟩ → Ô |Ψ⟩$</span>.</p><p>Some optimal control frameworks treat the optimization of quantum gates by numerically evolving the gate itself, <span>$Û(t=0) = I → Ô(t=T)$</span>. This is perfectly compatible with our framework: we can have a single trajectory for an initial &quot;state&quot; <span>$Û$</span> with a target &quot;state&quot; <span>$Ô$</span>. However, this approach does not scale well numerically when the logical subspace of the two-qubit gate is embedded in a significantly larger physical Hilbert space: <span>$Û$</span> is quadratically larger than <span>$|Ψ⟩$</span>. Moreover, the various methods implemented in the <code>QuantumControl</code> package are inherently <em>parallel</em> with respect to multiple trajectories. This is why we emphasize the formulation of the control problem in terms of multiple simultaneous trajectories.</p><p>Sometimes, some of the trajectories may be more important than others. In this case, the <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> can be instantiated with a <code>weight</code> attribute. There are also situations where the notion of a &quot;target state&quot; is not meaningful. Coming back to the example of two-qubit quantum gates, one may wish to maximize the entangling power of the quantum gate, without requiring a <em>specific</em> gate. We extract the information about the entangling power of the dynamical generator by tracking the time evolution of a set of states (the Bell basis, as it happens), but there is no meaningful notion of a &quot;target state&quot;. In this example, an <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> may be instantiated without the <code>target_state</code> attribute, i.e., containing only the <code>initial_state</code> and the <code>generator</code>. These are the minimal required attributes for any optimization.</p><p>Mathematically, the control problem is solved by minimizing a functional that is calculated from the time-propagated trajectory states. By convention, this functional is passed as a keyword argument <code>J_T</code> when instantiating the <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a>. Standard functionals are defined in <a href="../api/quantum_control/#QuantumControlFunctionalsAPI">the <code>QuantumControl.Functionals</code> module</a>. Depending on the control method, there can be additional options. See the documentation of the various methods implementing <a href="../api/quantum_control_base/#QuantumControlBase.optimize"><code>optimize</code></a> for the options required or supported by the different solvers. All of these options can be passed as keyword arguments when instantiating the <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a><sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>, or they can be passed later to <a href="../api/quantum_control_base/#QuantumControlBase.optimize"><code>optimize</code></a>/<a href="../api/quantum_control_reference/#QuantumControl.Workflows.@optimize_or_load"><code>@optimize_or_load</code></a>.</p><h2 id="Controls-and-control-parameters"><a class="docs-heading-anchor" href="#Controls-and-control-parameters">Controls and control parameters</a><a id="Controls-and-control-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Controls-and-control-parameters" title="Permalink"></a></h2><p>The controls that the <code>QuantumControl</code> package optimizes are implicit in the dynamical generator (<a href="../api/quantum_propagators/#QuantumPropagators.Generators.hamiltonian"><code>hamiltonian</code></a>, <a href="../api/quantum_propagators/#QuantumPropagators.Generators.liouvillian"><code>liouvillian</code></a>) of the <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectories</code></a> in the <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a>.</p><p>The <a href="../api/quantum_propagators/#QuantumPropagators.Controls.get_controls"><code>QuantumControl.Controls.get_controls</code></a> method extracts the controls from the trajectories. Each control is typically time-dependent, e.g., a function <span>$ϵ(t)$</span> or a vector of pulse values on a time grid. For each control, <a href="../api/quantum_propagators/#QuantumPropagators.Controls.discretize"><code>QuantumControl.Controls.discretize</code></a> and <a href="../api/quantum_propagators/#QuantumPropagators.Controls.discretize_on_midpoints"><code>QuantumControl.Controls.discretize_on_midpoints</code></a> discretizes the control to an existing time grid. For controls that are implemented through some custom type, these methods must be defined to enable piecewise-constant time propagation or an optimization that assumes piecewise-constant control (most notably, Krotov&#39;s method). See <a href="../api/quantum_propagators/#QuantumPropagators.Interfaces.check_control"><code>QuantumControl.Interfaces.check_control</code></a> for the full interface required of a control.</p><p>See also the <a href="https://juliaquantumcontrol.github.io/QuantumPropagators.jl/stable/generators/">section on Dynamical Generators in the <code>QuantumPropagators</code> documentation</a> and <a href="../api/quantum_control_base/#QuantumControlBase.check_generator"><code>QuantumControl.Interfaces.check_generator</code></a> for details on how generators and controls relate.</p><h2 id="Time-propagation"><a class="docs-heading-anchor" href="#Time-propagation">Time propagation</a><a id="Time-propagation-1"></a><a class="docs-heading-anchor-permalink" href="#Time-propagation" title="Permalink"></a></h2><p>The <code>QuantumControl</code> package uses (and includes) <a href="https://github.com/JuliaQuantumControl/QuantumPropagators.jl"><code>QuantumPropagators.jl</code></a> as the numerical back-end for simulating the time evolution of all quantum states. The main high-level function provided from that package is <a href="../api/quantum_propagators/#QuantumPropagators.propagate"><code>propagate</code></a>, which simulates the dynamics of a quantum state over an entire time grid. In the context of a <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a> consisting of one or more <a href="../api/quantum_control_base/#QuantumControlBase.Trajectory"><code>Trajectory</code></a>, there is also a <a href="../api/quantum_control_base/#QuantumControlBase.propagate_trajectory"><code>propagate_trajectory</code></a> function that provides a more convenient interface, automatically using the initial state and the dynamical generator from the trajectory.</p><p>A very typical overall workflow is to set up the control problem, then propagate the trajectories with the guess control to see how the system behaves, run the optimization, and then propagate the trajectories again with the optimized controls, to verify the success of the optimization. For plugging in the optimized controls, <a href="../api/quantum_propagators/#QuantumPropagators.Controls.substitute"><code>QuantumControl.Controls.substitute</code></a> can be used.</p><h2 id="Optimization"><a class="docs-heading-anchor" href="#Optimization">Optimization</a><a id="Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization" title="Permalink"></a></h2><p>The most direct way to solve a <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a> is with the <a href="../api/quantum_control_base/#QuantumControlBase.optimize"><code>optimize</code></a> routine. It has a mandatory <code>method</code> argument that then delegates the optimization to the appropriate sub-package implementing that method.</p><p>However, if the optimization takes more than a few minutes to complete, you should use <a href="../api/quantum_control_reference/#QuantumControl.Workflows.@optimize_or_load"><code>@optimize_or_load</code></a> instead of just <a href="../api/quantum_control_base/#QuantumControlBase.optimize"><code>optimize</code></a>. This routine runs the optimization and then writes the result to file. When called again, it will then simply load the result instead of rerunning the optimization. The <a href="../api/quantum_control_reference/#QuantumControl.Workflows.@optimize_or_load"><code>@optimize_or_load</code></a> also embeds some metadata in the output file, including (by default) the commit hash of the project repository containing the script that called <a href="../api/quantum_control_reference/#QuantumControl.Workflows.@optimize_or_load"><code>@optimize_or_load</code></a> and the filename of the script and line number where the call was made.</p><p>The output file written by <a href="../api/quantum_control_reference/#QuantumControl.Workflows.@optimize_or_load"><code>@optimize_or_load</code></a> can be read via the <a href="../api/quantum_control_reference/#QuantumControl.Workflows.load_optimization"><code>load_optimization</code></a> function. This can recover both the optimization result and the metadata.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>The solvers that ship with <code>QuantumControl</code> ignore options they do not know about. So when setting up a <a href="../api/quantum_control_base/#QuantumControlBase.ControlProblem"><code>ControlProblem</code></a> it is safe to pass a superset of options for different optimization methods.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../glossary/">« Glossary</a><a class="docs-footer-nextpage" href="../methods/">Control Methods »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/JuliaQuantumControl/QuantumControl.jl">QuantumControl.jl</a> v0.10.0+dev docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Saturday 27 July 2024 19:42">Saturday 27 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
